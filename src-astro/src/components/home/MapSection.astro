---
// Polytech Tours coordinates
const venue = {
  name: 'Polytech Tours',
  address: '64 Avenue Jean Portalis',
  city: '37200 Tours',
  coordinates: {
    lat: 47.3614,
    lng: 0.6849,
  },
};

// OpenStreetMap embed URL
const mapUrl = `https://www.openstreetmap.org/export/embed.html?bbox=${venue.coordinates.lng - 0.01}%2C${venue.coordinates.lat - 0.005}%2C${venue.coordinates.lng + 0.01}%2C${venue.coordinates.lat + 0.005}&layer=mapnik&marker=${venue.coordinates.lat}%2C${venue.coordinates.lng}`;

// Google Maps directions URL
const directionsUrl = `https://www.google.com/maps/dir/?api=1&destination=${venue.coordinates.lat},${venue.coordinates.lng}`;
---

<section class="map-section" id="venue">
  <div class="map-container">
    <div class="venue-info">
      <span class="section-label">Lieu</span>
      <h2>{venue.name}</h2>
      <p class="address">
        {venue.address}<br />
        {venue.city}
      </p>

      <div class="transport-info">
        <div class="transport-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 18V5l12 7-12 7z"/>
          </svg>
          <span>Tram ligne A - Arrêt "Gare de Tours"</span>
        </div>
        <div class="transport-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 6v6l4 2"/>
          </svg>
          <span>15 min à pied depuis la gare</span>
        </div>
        <div class="transport-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="1" y="3" width="15" height="13"/>
            <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/>
            <circle cx="5.5" cy="18.5" r="2.5"/>
            <circle cx="18.5" cy="18.5" r="2.5"/>
          </svg>
          <span>Parking gratuit sur place</span>
        </div>
      </div>

      <a href={directionsUrl} target="_blank" rel="noopener noreferrer" class="directions-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polygon points="3 11 22 2 13 21 11 13 3 11"/>
        </svg>
        Itinéraire
      </a>
    </div>

    <div class="map-wrapper">
      <iframe
        src={mapUrl}
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"
        title="Carte du lieu"
      ></iframe>
      <a
        href={`https://www.openstreetmap.org/?mlat=${venue.coordinates.lat}&mlon=${venue.coordinates.lng}#map=16/${venue.coordinates.lat}/${venue.coordinates.lng}`}
        target="_blank"
        rel="noopener noreferrer"
        class="map-link"
      >
        Voir sur OpenStreetMap
      </a>
    </div>
  </div>
</section>

<style>
  .map-section {
    background: var(--bg-primary);
    padding: 4rem 2rem;
  }

  .map-container {
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr 1.5fr;
    gap: 3rem;
    align-items: center;
  }

  .section-label {
    display: inline-block;
    padding: 0.35rem 0.75rem;
    background: var(--accent-light);
    color: var(--accent-dark);
    font-size: 0.8rem;
    font-weight: 600;
    border-radius: 100px;
    margin-bottom: 1rem;
  }

  .venue-info h2 {
    font-family: var(--font-display);
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
  }

  .address {
    font-size: 1.1rem;
    color: var(--text-secondary);
    margin-bottom: 2rem;
    line-height: 1.6;
  }

  .transport-info {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .transport-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    color: var(--text-secondary);
    font-size: 0.95rem;
  }

  .transport-item svg {
    color: var(--accent);
    flex-shrink: 0;
  }

  .directions-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    background: var(--accent);
    color: white;
    font-weight: 600;
    border-radius: var(--radius-md);
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .directions-btn:hover {
    background: var(--accent-dark);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
  }

  .map-wrapper {
    position: relative;
    border-radius: var(--radius-lg);
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    border: 1px solid var(--glass-border);
  }

  .map-wrapper iframe {
    width: 100%;
    height: 400px;
    border: none;
    display: block;
  }

  .map-link {
    position: absolute;
    bottom: 0.75rem;
    right: 0.75rem;
    padding: 0.4rem 0.75rem;
    background: rgba(255, 255, 255, 0.95);
    color: var(--text-secondary);
    font-size: 0.8rem;
    border-radius: 4px;
    text-decoration: none;
    transition: all 0.2s ease;
    box-shadow: var(--shadow-sm);
  }

  .map-link:hover {
    background: white;
    color: var(--accent);
  }

  @media (max-width: 900px) {
    .map-container {
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    .venue-info {
      text-align: center;
    }

    .transport-info {
      align-items: center;
    }

    .venue-info h2 {
      font-size: 1.75rem;
    }

    .map-wrapper iframe {
      height: 300px;
    }
  }

  @media (max-width: 640px) {
    .map-section {
      padding: 3rem 1rem;
    }

    .venue-info h2 {
      font-size: 1.5rem;
    }
  }
</style>
