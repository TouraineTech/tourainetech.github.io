import{f as S,v as k,g as $,y as R,c as v,o as D,n as y,a as E,t as g,u as c,_ as w,I as V,k as h,Q as r,d as j,F as L,r as O,b}from"./CDXgjVdo.js";import{_ as A}from"./BheWnx7M.js";const N=S({__name:"TimerTalk",props:{room:{},talk:{}},setup(u){const o=u,d=k({asString:"00 : 00",remainingInSeconds:0}),i=k(null),_=k(!1);function p(t){const e=new Date;e.setHours(Number(t.split(":")[0]),Number(t.split(":")[1]),0);const a=new Date,n=(e.getTime()-a.getTime())/1e3;return{asString:`${String(Math.floor(n/60)).padStart(2,"0")} : ${String(Math.floor(n-Math.floor(n/60)*60)).padStart(2,"0")}`,remainingInSeconds:n}}function f(t,e){const a=new Date;a.setHours(Number(t.split(":")[0]),Number(t.split(":")[1]),0);const n=new Date;n.setHours(Number(e.split(":")[0]),Number(e.split(":")[1]),0);const l=(a.getTime()-n.getTime())/1e3;return{asString:`${String(Math.floor(l/60)).padStart(2,"0")} : ${String(Math.floor(l-Math.floor(l/60)*60)).padStart(2,"0")}`,remainingInSeconds:l}}return $(()=>{if(!o.talk)return;const t=new Date,e=t.getMinutes(),a=t.getHours(),n=(o.talk.endTime||"00:00").split(":"),l=Date.parse(`01/01/2001 ${n[0]}:${n[1]}:00`),I=Date.parse(`01/01/2001 ${a}:${e}:00`),m=f(o.talk.endTime||"00:00",o.talk.time);o.talk.endTime&&l>I&&(i.value=window.setInterval(()=>{if(!o.talk)return;const s=p(o.talk.endTime);if(s.remainingInSeconds<m.remainingInSeconds/10&&(_.value=!0),s.remainingInSeconds<0){const T=document.getElementById(o.talk.nextTalkId);T&&window.scroll({top:T.offsetTop}),i.value&&clearInterval(i.value)}d.value=s},500))}),R(()=>{i.value&&clearInterval(i.value)}),(t,e)=>(D(),v("div",{class:y(["timerTalk",`timerTalk-${u.room}`])},[E("h1",null,g(u.talk?.talk?.name),1),E("h2",{class:y(["chrono",{blink:c(_)}])},g(c(d).asString),3),E("h3",null,"Prochain sujet : "+g(u.talk.nextTalkName),1)],2))}}),x=w(N,[["__scopeId","data-v-e3a16003"]]),M={class:"container--white fullWidth"},F=["id"],B=S({__name:"[room]",setup(u){const o=V(),d=h(()=>o.params.someDay),i=h(()=>o.params.room),_=k([]),p=k(null);return $(async()=>{try{const t=(await A(Object.assign({"../../../assets/timer/day1/Bio.json":()=>r(()=>import("./CS322WH9.js"),[],import.meta.url),"../../../assets/timer/day1/F21.json":()=>r(()=>import("./CE01y60k.js"),[],import.meta.url),"../../../assets/timer/day1/F22.json":()=>r(()=>import("./2HL65Qom.js"),[],import.meta.url),"../../../assets/timer/day1/F23.json":()=>r(()=>import("./BhKOwNXX.js"),[],import.meta.url),"../../../assets/timer/day1/Physique.json":()=>r(()=>import("./DPJdnA8l.js"),[],import.meta.url),"../../../assets/timer/day2/Bio.json":()=>r(()=>import("./DKEvOBqF.js"),[],import.meta.url),"../../../assets/timer/day2/F21.json":()=>r(()=>import("./CKoBtxIz.js"),[],import.meta.url),"../../../assets/timer/day2/F22.json":()=>r(()=>import("./BD0vTPDb.js"),[],import.meta.url),"../../../assets/timer/day2/F23.json":()=>r(()=>import("./D4RiJ_6d.js"),[],import.meta.url),"../../../assets/timer/day2/Physique.json":()=>r(()=>import("./8ISDiidR.js"),[],import.meta.url)}),`../../../assets/timer/day${d.value}/${i.value}.json`,7)).default,e=t.map((m,s)=>({...m,endTime:t[s+1]?.time,nextTalkId:t[s+1]?.talk?.id,nextTalkName:t[s+1]?.talk?.name})),a=new Date,n=a.getMinutes(),l=a.getHours(),I=e.filter(({endTime:m="00:00"})=>{const s=m.split(":"),T=Date.parse(`01/01/2001 ${s[0]}:${s[1]}:00`),P=Date.parse(`01/01/2001 ${l}:${n}:00`);return T>P})[0];p.value=I,_.value=e,setTimeout(()=>{if(p.value?.talk?.id){const m=document.getElementById(p.value.talk.id);m&&window.scroll({top:m.offsetTop})}},2e3)}catch(f){console.error("Error loading timer data:",f)}}),(f,t)=>{const e=x;return D(),v("div",M,[j(" Room page "+g(c(i))+" for day "+g(c(d))+" ",1),(D(!0),v(L,null,O(c(_),a=>(D(),v("div",{id:a?.talk?.id,key:a?.talk?.id,class:"talk--bloc"},[b(e,{talk:a,room:c(i)},null,8,["talk","room"])],8,F))),128))])}}}),C=w(B,[["__scopeId","data-v-6f222560"]]);export{C as default};
